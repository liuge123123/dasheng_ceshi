<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.tcc.modules.exercise.dao.SignInDao">

    <select id="selectSignIn" resultType="com.tcc.modules.exercise.entity.SignInEntity" parameterType="java.util.Map">
        SELECT
        m.id,
        m.cust_id as custId,
        m.sign_in_time as signInTime,
        m.gift_amount as giftAmount,
        m.cumulative_days as cumulativeDays,
        m.create_time as createTime
        FROM exercise_sign_in m
        <where>
            m.del_flag = 0
            <if test="condition.key!=null">
                and m.cust_id like '%${condition.key}%'
            </if>
            <if test="condition.custId!=null  and condition.custId!= ''">
                and m.cust_id  = #{condition.custId}
            </if>
            <if test="condition.nowTime!=null  and condition.nowTime!= ''">
                and DATE_FORMAT(m.sign_in_time,"%Y-%m-%d")  = #{condition.nowTime}
            </if>
        </where>
        order by m.create_time desc
    </select>

</mapper>